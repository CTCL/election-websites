window.ctcl={addTopic:function(e){var t=e.target.parentNode,o=t.querySelector(".button"),n=document.createElement("input"),i=t.cloneNode(!0);n.setAttribute("type","button"),n.setAttribute("class","button remove"),n.setAttribute("value","Remove"),n.addEventListener("click",window.ctcl.removeTopic),i.querySelector(".button.add").addEventListener("click",window.ctcl.addTopic),i.querySelector(".multitext").value="",t.appendChild(n),o.remove(),t.parentNode.appendChild(i)},removeTopic:function(e){e.target.parentNode.remove()},handleTopics:function(){var e,t=document.querySelector(".button.add");t&&t.addEventListener("click",window.ctcl.addTopic),(e=document.querySelectorAll(".button.remove"))&&e.forEach(function(e){e.addEventListener("click",window.ctcl.removeTopic)})},handleImage:function(){var e=document.querySelector(".button.upload"),t=document.querySelector(".button.remove");e&&e.addEventListener("click",window.ctcl.handleImageUpload),t&&t.addEventListener("click",window.ctcl.removeImageThumbnail)},removeImageThumbnail:function(e){var t=document.querySelector(".imageid"),o=e.target.parentNode.querySelector("img");e.target.setAttribute("disabled","disabled"),t&&(t.value=""),o&&o.remove()},handleImageUpload:function(r){var a;r.preventDefault(),a||(a=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1})).on("select",function(){var e=r.target.parentNode.querySelector("img"),t=r.target.parentNode.querySelector(".button.remove"),o=document.createElement("img"),n=a.state().get("selection").first().toJSON(),i=document.querySelector(".imageid");i&&(i.value=n.id),e&&e.remove(),t&&t.removeAttribute("disabled"),o.setAttribute("class","image-thumbnail"),o.setAttribute("alt",n.title),o.setAttribute("src",n.sizes.thumbnail.url),o.setAttribute("width",n.sizes.thumbnail.width),o.setAttribute("heigt",n.sizes.thumbnail.height),r.target.parentNode.appendChild(o)}),a.open()}},document.addEventListener("DOMContentLoaded",function(){"elections_page_topics"===window.pagenow?window.ctcl.handleTopics():document.querySelector(".upload-wrapper")&&window.ctcl.handleImage()});