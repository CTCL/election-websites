window.ctcl={addTopic:function(e){var t=e.target.parentNode,n=t.querySelector(".button"),o=document.createElement("input"),i=t.cloneNode(!0);o.setAttribute("type","button"),o.setAttribute("class","button remove"),o.setAttribute("value","Remove"),o.addEventListener("click",window.ctcl.removeTopic),i.querySelector(".button.add").addEventListener("click",window.ctcl.addTopic),i.querySelector(".multitext").value="",t.appendChild(o),n.remove(),t.parentNode.appendChild(i)},removeTopic:function(e){e.target.parentNode.remove()},handleTopics:function(){var e,t=document.querySelector(".button.add");t&&t.addEventListener("click",window.ctcl.addTopic),(e=document.querySelectorAll(".button.remove"))&&e.forEach(function(e){e.addEventListener("click",window.ctcl.removeTopic)})},handleBanner:function(){var e=document.getElementById("upload_banner_image"),t=document.querySelector(".button.remove");e&&e.addEventListener("click",window.ctcl.handleBannerUpload),t&&t.addEventListener("click",window.ctcl.removeBannerThumbnail)},removeBannerThumbnail:function(e){var t=document.getElementById("banner_image"),n=e.target.parentNode.querySelector("img");e.target.setAttribute("disabled","disabled"),t&&(t.value=""),n&&n.remove()},handleBannerUpload:function(a){var r;a.preventDefault(),r||(r=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1})).on("select",function(){var e=a.target.parentNode.querySelector("img"),t=a.target.parentNode.querySelector(".button.remove"),n=document.createElement("img"),o=r.state().get("selection").first().toJSON(),i=document.getElementById("banner_image");i&&(i.value=o.id),e&&e.remove(),t&&t.removeAttribute("disabled"),n.setAttribute("id","banner_image_thumbnail"),n.setAttribute("alt",o.title),n.setAttribute("src",o.sizes.thumbnail.url),n.setAttribute("width",o.sizes.thumbnail.width),n.setAttribute("heigt",o.sizes.thumbnail.height),a.target.parentNode.appendChild(n)}),r.open()}},document.addEventListener("DOMContentLoaded",function(){"elections_page_topics"===window.pagenow?window.ctcl.handleTopics():"elections_page_banner"===window.pagenow&&window.ctcl.handleBanner()});